<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>HLS Player</title>
</head>

<body>
    <div class="header">
        <img class="header-logo"
            src="https://www.gq-magazine.co.uk/verso/static/gq-global/assets/logo-international.svg">
    </div>

    <video playsinline autoplay muted preload="true" id="video" height="auto" controls></video>
    <div id="metadata"></div>
    <div>Video</div>


    <div class="overlay">
        <div class="overlay--product-image-container">
            <img class="overlay--product-image"
                src="https://cdn-images.farfetch-contents.com/19/74/26/95/19742695_44204897_1000.jpg" />
            <!-- <img class="overlay--product-image"
                src="https://www.elago.com/cdn/shop/products/AP3RH-HANG-MT_Amazon_1296x.jpg?v=1625787359" /> -->

            <!-- <img class="overlay--product-image"
                src="https://soyouz2.deindeal.ch/api/img?p=products/2023/2/07248471-BD7F-49C2-82F0-B60ACD6FDEF4/14128898_1&st=11&v=1676301889" /> -->
        </div>
        <div class="overlay-info">
            <div class="overlay--product-name">round-frame tinted sunglasses</div>
            <div class="overlay--product-price">$330</div>
            <div class="overlay--product-buy-button">Shop Now</div>
        </div>

    </div>

    <style>
        body {
            background: grey;
            padding: 0px;
            margin: 0px;
        }

        .header {
            background: white;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-logo {
            width: 80px;

        }

        .overlay {
            width: 300px;
            background: white;
            transition: opacity 1s ease-out;
            border-radius: 12px;
            position: absolute;
            top: 80px;
            right: 20px;

        }

        .overlay--product-price {
            font-weight: 800;
        }

        .overlay-info {
            background: white;
            margin: 12px;
            display: flex;
            flex-direction: column;
            line-height: 32px;
        }

        .overlay--product-image-container {
            padding: 12px;
        }

        .overlay--product-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .overlay--product-buy-button {
            background: #6a6af2;
            text-align: center;
            color: white;
            border-radius: 6px;
        }

        .visible {
            opacity: 1;
        }

        .hidden {
            opacity: 0;
        }
    </style>
    <!-- <video playsinline autoplay muted preload="true" id="video" height="auto" controls></video>
    <div id="metadata"></div> -->
    <script src="hls-parser"></script>
    <script src="hls"></script>
    <script src="koda-player"></script>


    <script>

        const videoElement = document.getElementById('video');
        const metadataContainer = document.getElementById('metadata')


        const player = new KodaPlayer({
            videoElement: videoElement,
            videoSource: '/events/1/output.m3u8',
            eventId: '1',
            apiUrl: "http://localhost:4000",
            sessionId: "1703778468",
            onViewerCountChange: (data) => {
                console.log(data);
            },
            onMetadataUpdate: (data) => {
                const decodedJson = player.decodeJson(data)
                metadataContainer.innerHTML = decodedJson.description;
            }
        });
        console.log('- - - -', player);


        // var data = {
        //     title: 'The San Sebastian Interview',
        //     description: `San Sebastian is a name that's quickly gaining prominence in the Parisian fashion scene. As a gifted stylist and art director, Sebastian has mastered the art of merging the raw energy of streetwear with the timeless elegance of premium fashion. After carving out a niche for himself in the world of premium streetwear, his diverse portfolio now includes acclaimed music videos, personal clients, and catwalk showcases. Sebastian's journey started in the Caribbean, a fact that, while not always overt, subtly influences his work. However, it's his life in Paris that's truly honed his stylistic instincts. For SneakTV's interview, he candidly discussed his fashion journey, detailing the myriad of influences that shape his unique style. His love for sneakers mirrors his eclectic tastes, Sebastian considers these to be more than just an accessory. For him, they are an integral part of the cultural dialogue between streetwear and high fashion. His recent works continue to reflect this, often featuring imaginative reinterpretations of classic sneaker designs. In essence, Sebastian represents the new wave of fashion creatives, those who are not just participants but push the boundaries of traditional style norms. His Caribbean roots and Parisian influences converge to create a unique fashion narrative, positioning him firmly at the forefront of the Paris fashion scene.`,
        //     productIds: ['gid://shopify/Product/8147416416515', 'gid://shopify/Product/8103980990723', 'gid://shopify/Product/8103980990723', 'gid://shopify/Product/8103980990723'],
        // }

        // var data = {
        //     title: 'Title: Salomon x Gramicci - Techsonic Launch',
        //     description: `At the end of April, Sneak In Peace celebrated the hotly-anticipated release of the Salomon x Gramicci TECHSONIC at Outsiders Store’s launch party in London. The ultimate sneaker for hardcore watersports (or just typical British weather, really), this sandal-like shoe boasts a breathable mesh upper that’s engineered to dry out ASAP, and a collapsible, water resistant construction that will keep your feet nice and dry at all times. Salomon has also added a Quicklace lacing system and an extra rugged Vibe midsole that will make any gorpcore enthusiast envious, and co-branded detailing decks out the tongue and insole, finishing off the adventure-ready silhouette.`,
        //     productIds: ['gid://shopify/Product/8049361191171', 'gid://shopify/Product/8153060835587', 'gid://shopify/Product/8153059787011', 'gid://shopify/Product/8153057755395'],
        // }

        // var data = {
        //     title: 'Title: Visvim, Fukuoka, Store Visit',
        //     description: `To some heads, Japanese menswear brand Visvim require no introduction. Founded by Hiroki Nakamura in Ura-Harajuku in 2001, the cult brand is known for contemporary spins on classic and unique vintage pieces. Their no-stone-unturned approach sees them dive into every detail of design, materials and manufacture in pursuit of unimaginably subtle, luxurious and authentic product.`,
        //     productIds: ['gid://shopify/Product/8139750244611', 'gid://shopify/Product/8053239513347', 'gid://shopify/Product/7990656106755', 'gid://shopify/Product/8054763487491'],
        // }

    </script>
</body>

</html>